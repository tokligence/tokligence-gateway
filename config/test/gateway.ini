# Overrides for the test environment
#
# Configuration Hierarchy (priority from high to low):
# 1. Environment variables (e.g., TOKLIGENCE_WORK_MODE, TOKLIGENCE_OPENAI_API_KEY)
#    - Highest priority, overrides everything
#    - Set via: export TOKLIGENCE_XXX=value or in .env file
# 2. This gateway.ini file (environment-specific: live/dev/test)
#    - Environment-specific overrides
#    - Loaded based on TOKLIGENCE_ENV or --env flag
# 3. Default values in code
#    - Lowest priority, used when no override is specified
#
# Example: If TOKLIGENCE_WORK_MODE=passthrough is set as env var,
#          it will override work_mode=auto in this file
#
# Dedicated exchange endpoint for automated tests
base_url=https://test.tokligence.ai
# Port scheme: facade=8081, admin=8079, openai=8082, anthropic=8083
facade_port=8081
# Test account that fixtures use when authenticating
email=test@example.com
# Name included in assertions for test fixtures
display_name=Test Gateway
# Enable provider mode so smoke tests can publish entries
enable_provider=true
ledger_path=~/.tokligence/ledger-test.db
publish_name=local-test
model_family=claude-3.5-sonnet
price_per_1k=0.5000
auth_secret=tokligence-test-secret
# Log sink captured during test runs
# For tests, default to CLI log; override per process with TOKLIGENCE_LOG_FILE_CLI/_DAEMON
log_file_cli=logs/test-cli.log
log_file_daemon=logs/test-gatewayd.log
log_level=debug

# Work Mode: controls passthrough vs translation behavior globally for all endpoints
# This is a critical setting that affects how the gateway handles requests:
#   - auto (default):        Smart routing - automatically choose passthrough or translation
#                            based on endpoint+model match (e.g., /v1/responses+gpt* = passthrough,
#                            /v1/responses+claude* = translation)
#   - passthrough:           Delegation-only mode - only allow direct passthrough/delegation
#                            to upstream providers, reject any translation requests
#   - translation:           Translation-only mode - only allow translation between API formats,
#                            reject any passthrough requests
# Override with: TOKLIGENCE_WORK_MODE=auto|passthrough|translation
work_mode=auto
