<p align="center">
  <img src="data/images/logo_navy.png" alt="Tokligence Gateway" width="150"/>
</p>

<h1 align="center">Tokligence Gateway</h1>

<p align="center">
  <strong>é¦–ä¸ªæ”¯æŒåŒå‘äº¤æ˜“çš„å¼€æº AI ç½‘å…³</strong>
</p>

<p align="center">
  <a href="README.md">English</a> | <a href="README_zh.md">ä¸­æ–‡</a>
</p>

<p align="center">
  <img src="https://img.shields.io/badge/Go-1.24%2B-00ADD8?logo=go" alt="Go Version"/>
  <img src="https://img.shields.io/badge/OS-Linux%20%7C%20macOS%20%7C%20Windows-lightgrey" alt="Platform"/>
  <img src="https://img.shields.io/badge/Tested%20with-Codex%20CLI%20v0.55.0+-brightgreen?logo=openai" alt="Codex CLI"/>
  <img src="https://img.shields.io/badge/Tested%20with-Claude%20Code%20v2.0.29-4A90E2?logo=anthropic&logoColor=white" alt="Claude Code"/>
</p>

<p align="center">
  <a href="https://github.com/tokligence/tokligence-gateway/actions/workflows/ci.yml">
    <img src="https://github.com/tokligence/tokligence-gateway/actions/workflows/ci.yml/badge.svg" alt="CI"/>
  </a>
</p>

## ğŸŒ æ„¿æ™¯

**æˆ‘ä»¬ä¸åªæ˜¯åœ¨æ„å»ºå¦ä¸€ä¸ª LLM ç½‘å…³ï¼šæˆ‘ä»¬æ­£åœ¨åˆ›å»ºä¸€ä¸ªæ”¯æŒåŒå‘ Token äº¤æ˜“çš„å¼€æº AI ç½‘å…³ã€‚**

### ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦

AI æ­£åœ¨å˜å¾—åƒæ°´ç”µä¸€æ ·å¿…ä¸å¯å°‘ã€‚ç„¶è€Œï¼ŒLLM Token ä¾›åº”èƒ½åŠ›ä¸åº”è¯¥åªé›†ä¸­åœ¨åƒ OpenAI ç­‰å°‘æ•°ç§‘æŠ€å·¨å¤´æ‰‹ä¸­ã€‚æˆ‘ä»¬å¸Œæœ›ï¼š

- ğŸ”Œ **AI åº”è¯¥æ˜¯åŸºç¡€è®¾æ–½** - å¼€æ”¾é€æ˜ï¼Œä¸è¢«å°‘æ•°å¹³å°æ§åˆ¶
- ğŸ”„ **æ¯ä¸ªæ¶ˆè´¹è€…éƒ½èƒ½æˆä¸ºæä¾›è€…** - ä½ å¤šä½™çš„ LLM token ååé‡å¯ä»¥æœåŠ¡ä»–äººï¼Œå°±åƒæ¯”ç‰¹å¸æŒ–çŸ¿è®©é‡‘èæ°‘ä¸»åŒ–ä¸€æ ·
- ğŸŒ **æœªæ¥æ˜¯åˆ†å¸ƒå¼çš„** - æ„å»ºå…¨çƒå»ä¸­å¿ƒåŒ–token äº¤æ˜“å¸‚åœºï¼Œæ™®é€šäººä¹Ÿå¯ä»¥æˆä¸ºtokenæä¾›æ–¹

### æ”¹å˜æ¸¸æˆè§„åˆ™çš„å·®å¼‚ï¼šåŒå‘äº¤æ˜“

```
ä¼ ç»Ÿç½‘å…³:        ç”¨æˆ· â†’ ç½‘å…³ â†’ æä¾›å•†  (å•å‘æ¶ˆè´¹)
Tokligence:     ç”¨æˆ·ï¼ˆæ‹¥æœ‰GPUå’Œè‡ªæ‰˜ç®¡LLMçš„ï¼‰ â†” ç½‘å…³ â†” Tokenäº¤æ˜“å¸‚åœº    (åŒå‘ä¹°å– Token)
```

ä½¿ç”¨ Tokligenceï¼Œæ¯ä¸ªå®‰è£…å®ä¾‹éƒ½æˆä¸ºå…¨çƒ AI Token ç½‘ç»œä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚ä½ å¯ä»¥ï¼š
- **è´­ä¹°** Tokenï¼Œæ»¡è¶³ AI éœ€æ±‚
- **å‡ºå”®**æœªä½¿ç”¨çš„ LLM token ååé‡ç»™tokenå¸‚åœº
- åœ¨ä¸åŒä»·æ ¼å’Œå¯ç”¨æ€§ä¹‹é—´è¿›è¡Œ**å¥—åˆ©**

**æˆ‘ä»¬çš„é¢„æµ‹**ï¼šAI çš„æœªæ¥ä¸æ˜¯ä¸­å¿ƒåŒ–æä¾›å•†ï¼Œè€Œæ˜¯ä¸€ä¸ªç½‘çŠ¶ç½‘ç»œï¼Œæ¯ä¸ª è‡ªæ‰˜ç®¡LLMçš„ ä¼ä¸šæˆ–ä¸ªäººéƒ½å¯ä»¥å‡ºå”®å‰©ä½™ token ååé‡ã€‚

---

> **ç®€è€Œè¨€ä¹‹**ï¼šTokligence Gateway æ˜¯ä¸€ä¸ª Golang åŸç”Ÿçš„é«˜æ€§èƒ½ LLM ç½‘å…³ï¼Œä¸ä»…æä¾›å¯¹å¤šä¸ª LLM æä¾›å•†çš„ç»Ÿä¸€è®¿é—®ï¼Œè¿˜ä½¿ä½ èƒ½å¤Ÿå°†æœªä½¿ç”¨çš„ LLM token ååé‡å‡ºå”®åˆ°å¸‚åœºä¸Šã€‚å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆ AI Token çš„ Airbnbã€‚

## æ¦‚è¿°

Tokligence Gateway æ˜¯ä¸€ä¸ª**å¹³å°æ— å…³**çš„ LLM ç½‘å…³ï¼Œæä¾›**åŒåè®®åŸç”Ÿæ”¯æŒ** - åŒæ—¶æ”¯æŒ OpenAI å’Œ Anthropic åè®®ï¼Œå¹¶å…·å¤‡å®Œæ•´çš„åŒå‘ç¿»è¯‘èƒ½åŠ›ã€‚ç½‘å…³ä¼˜å…ˆè€ƒè™‘ï¼š

1. **åŒåè®®åŸç”Ÿæ”¯æŒ**ï¼šOpenAI å’Œ Anthropic API åŒæ—¶åŸç”Ÿè¿è¡Œï¼Œé›¶é€‚é…å±‚æŸè€—
2. **å¹³å°ç‹¬ç«‹æ€§**ï¼šåœ¨ä»»ä½•å¹³å°ï¼ˆLinuxã€macOSã€Windowsï¼‰ä¸Šç‹¬ç«‹è¿è¡Œï¼Œæ— éœ€å¤–éƒ¨ä¾èµ–
3. **çµæ´»éƒ¨ç½²**ï¼šå¤šç§å®‰è£…æ–¹å¼ - pipã€npmã€Docker æˆ–ç‹¬ç«‹äºŒè¿›åˆ¶æ–‡ä»¶
4. **æ™ºèƒ½å·¥ä½œæ¨¡å¼**ï¼šè‡ªåŠ¨ã€é€ä¼ æˆ–ç¿»è¯‘æ¨¡å¼ï¼Œçµæ´»å¤„ç†è¯·æ±‚
5. **Token äº¤æ˜“**ï¼šå¯é€‰çš„åŒå‘ Token äº¤æ˜“èƒ½åŠ›

## âš¡ æ€§èƒ½è¡¨ç°

Tokligence Gateway ä»¥æä½çš„èµ„æºå ç”¨æä¾›å“è¶Šçš„æ€§èƒ½è¡¨ç°å’Œä¸šç•Œé¢†å…ˆçš„æˆæœ¬æ•ˆç›Šã€‚

### ä¸ LiteLLM çš„æ€§èƒ½å¯¹æ¯”ï¼ˆv0.3.4ï¼ŒPostgreSQLï¼‰

åŸºäº [LiteLLM å®˜æ–¹åŸºå‡†æµ‹è¯•](https://docs.litellm.ai/docs/benchmarks)ï¼ˆ4 CPUï¼Œ8GB RAMï¼‰ï¼š

| æŒ‡æ ‡ | LiteLLM<br/>ï¼ˆ4 å®ä¾‹ï¼‰ | Tokligence v0.3.4<br/>ï¼ˆ1 å®ä¾‹ï¼‰ | æ€§èƒ½æå‡ |
|------|------------------------|--------------------------------|----------|
| **ååé‡** | 1,170 RPS | **11,227 RPS** | **9.6å€** âœ¨ |
| **P50 å»¶è¿Ÿ** | 100 ms | **49.66 ms** | **2å€** âš¡ |
| **P95 å»¶è¿Ÿ** | 150 ms | **78.63 ms** | **1.9å€** ğŸš€ |
| **P99 å»¶è¿Ÿ** | 240 ms | **93.81 ms** | **2.6å€** |
| **åŸºç¡€è®¾æ–½** | 4 å®ä¾‹ | **1 å®ä¾‹** | **å‡å°‘ 75%** ğŸ’° |
| **é”™è¯¯ç‡** | æœªæŠ¥å‘Š | **0%** | å®Œç¾ç¨³å®šæ€§ |

**å³°å€¼æ€§èƒ½**ï¼ˆ100 å¹¶å‘ï¼‰ï¼š
- **12,908 RPS** - ç»å¯¹æœ€å¤§ååé‡
- **P50: 7.75ms, P95: 16.47ms, P99: 21.15ms** - äºš 100ms å»¶è¿Ÿ
- **60 ç§’å†…å¤„ç† 774,571 ä¸ªè¯·æ±‚**ï¼Œé›¶é”™è¯¯

**æˆæœ¬æ•ˆç›Š**ï¼š
- **æ¯ç¾å…ƒæ€§èƒ½é«˜å‡º 38.4 å€**
- **åŸºç¡€è®¾æ–½æˆæœ¬ä»… 1/4**ï¼ˆ1 å®ä¾‹ vs 4 å®ä¾‹ï¼‰
- **ååé‡é«˜ 9.6 å€**ï¼Œèµ„æºå‡å°‘ 75%

æŸ¥çœ‹ [scripts/benchmark/](scripts/benchmark/) äº†è§£å®Œæ•´æµ‹è¯•æ–¹æ³•è®ºã€è¯¦ç»†ç»“æœå’Œå¤ç°æ­¥éª¤ã€‚

### æ ¸å¿ƒåŠŸèƒ½å¯¹æ¯”

| ç‰¹æ€§ç»´åº¦ | Tokligence Gateway | LiteLLM | OpenRouter | Cloudflare AI Gateway | AWS Bedrock |
|---------|-------------------|---------|------------|-----------------------|-------------|
| **åè®®ä¸ç¿»è¯‘** | æ”¯æŒ OpenAI â†” Anthropic åŒå‘ç¿»è¯‘ï¼ŒåŒåè®®åŸç”Ÿç«¯ç‚¹ã€‚ | ä»¥ OpenAI æ ¼å¼ä¸ºå…¥å£ï¼Œè·¯ç”±åˆ°å¤šå®¶æä¾›å•†ã€‚ | ä»¥ OpenAI é£æ ¼æ¥å£å¯¹å¤šå®¶æ¨¡å‹åšå†…éƒ¨è½¬æ¢ã€‚ | æ ‡å‡†åŒ–å¤šå®¶æä¾›å•†çš„ OpenAI é£æ ¼è¯·æ±‚ã€‚ | é€šè¿‡ Converse API åœ¨ AWS å†…ç»Ÿä¸€ Bedrock æ¨¡å‹è°ƒç”¨ã€‚ |
| **å·¥ä½œæ¨¡å¼ä¸è·¯ç”±** | æ¨¡å‹ä¼˜å…ˆçš„ Auto æ¨¡å¼ï¼Œå…ˆé€‰æä¾›å•†å†é€‰åè®®ã€‚ | æ”¯æŒæŒ‰æˆæœ¬ã€å»¶è¿Ÿã€æƒé‡ç­‰çµæ´»è·¯ç”±ç­–ç•¥ã€‚ | åœ¨æ‰˜ç®¡ç½‘å…³å†…è‡ªåŠ¨åšè·¯ç”±å’Œå›é€€ã€‚ | ä¾æ‰˜è¾¹ç¼˜ç½‘ç»œæä¾›åœ°ç† / A/B è·¯ç”±ã€‚ | ä¸ AWS åŒºåŸŸå’ŒæœåŠ¡ç´§å¯†è€¦åˆçš„è·¯ç”±ã€‚ |
| **ç«¯å£ä¸éš”ç¦»** | é»˜è®¤å•ç«¯å£ï¼Œå¯é€‰å¤šç«¯å£ä¸¥æ ¼éš”ç¦»ã€‚ | å•è¿›ç¨‹ä»£ç†ï¼Œé€šè¿‡é…ç½®åšé€»è¾‘éš”ç¦»ã€‚ | å•ä¸€ SaaS ç«¯ç‚¹ã€‚ | ç”± Cloudflare ç®¡ç†çš„ä¸€ç»„è¾¹ç¼˜ç«¯ç‚¹ã€‚ | ç”± AWS ç®¡ç†çš„åŒºåŸŸåŒ–æœåŠ¡ç«¯ç‚¹ã€‚ |
| **å®¢æˆ·ç«¯ä¸ SDK** | å…¼å®¹ OpenAI / Anthropic SDKï¼ˆå« Codexã€Claude Codeï¼‰ï¼Œæ— éœ€æ”¹åŠ¨å®¢æˆ·ç«¯ä»£ç ã€‚ | é€‚åˆä½¿ç”¨ OpenAI SDK | é€‚åˆä½¿ç”¨ OpenAI SDK | é€‚åˆå·²åœ¨ Cloudflare è¾¹ç¼˜ç»ˆæ­¢æµé‡çš„åº”ç”¨ã€‚ | é€‚åˆä½¿ç”¨ AWS SDKã€ä»¥ Bedrock ä¸ºä¸»çš„æ¶æ„ã€‚ |
| **æ€§èƒ½ä¸è¿è¡Œå¼€é”€** | Go ç¼–è¯‘äºŒè¿›åˆ¶ï¼Œç¿»è¯‘è·¯å¾„å¼€é”€ä½ã€‚ | Python æœåŠ¡ï¼Œè¿è¡Œæ—¶å¼€é”€ç›¸å¯¹æ›´é«˜ã€‚ | å¢åŠ ä¸€è·³ç½‘ç»œä»£ç†ï¼Œå»¶è¿Ÿå–å†³äºä¸Šæ¸¸ã€‚ | åœ¨è¾¹ç¼˜è¿è¡Œï¼Œé¢å‘å…¨çƒçš„ç«¯åˆ°ç«¯å»¶è¿Ÿè¾ƒä½ã€‚ | é’ˆå¯¹ AWS åŒºåŸŸå†…æµé‡åšäº†ä¼˜åŒ–ã€‚ |
| **éƒ¨ç½²ä¸æ§åˆ¶** | è‡ªæ‰˜ç®¡å¼€æºï¼Œæ”¯æŒ Dockerã€äºŒè¿›åˆ¶ã€pipã€npmã€‚ | è‡ªæ‰˜ç®¡çš„ Python æœåŠ¡ï¼Œå¯ä¸ç°æœ‰åº”ç”¨ä¸€èµ·éƒ¨ç½²ã€‚ | å®Œå…¨æ‰˜ç®¡çš„ SaaSï¼Œæ— éœ€è‡ªå»ºåŸºç¡€è®¾æ–½ã€‚ | ä½œä¸º Cloudflare å¹³å°çš„ä¸€éƒ¨åˆ†è¿ä½œã€‚ | ä½œä¸º AWS è´¦å·å†…çš„æ‰˜ç®¡æœåŠ¡è¿è¡Œã€‚ |
| **è´¦æœ¬ä¸å®¡è®¡** | å†…ç½® Token è´¦æœ¬ï¼Œä¾¿äºåšä½¿ç”¨ä¸å®¡è®¡è¿½è¸ªã€‚ | å¯é€šè¿‡æœåŠ¡æŒ‡æ ‡æŸ¥çœ‹ç”¨é‡ã€‚ | åœ¨æ§åˆ¶å°ä¸­æä¾›è®¡è´¹å’Œç”¨é‡åˆ†æã€‚ | é€šè¿‡ Cloudflare æä¾›æµé‡ä¸åˆ†æèƒ½åŠ›ã€‚ | é€šè¿‡ CloudWatch å’Œè®¡è´¹æŠ¥è¡¨æŸ¥çœ‹ç”¨é‡ã€‚ |
| **Token äº¤æ˜“å¸‚åœº** | é¢å‘åŒè¾¹ Token äº¤æ˜“å¸‚åœºè®¾è®¡ï¼Œå¯ä¹°å…¥æˆ–å‡ºå”®é—²ç½®çš„ LLM ååé‡ã€‚ | ä»…æŒ‰è°ƒç”¨æ¶ˆè´¹ï¼Œä¸æ”¯æŒ Token äº¤æ˜“å¸‚åœºã€‚ | ä»…æŒ‰è°ƒç”¨æ¶ˆè´¹ï¼Œä¸æ”¯æŒ Token äº¤æ˜“å¸‚åœºã€‚ | ä»…æŒ‰è°ƒç”¨æ¶ˆè´¹ï¼Œä¸æ”¯æŒ Token äº¤æ˜“å¸‚åœºã€‚ | ä»…æŒ‰è°ƒç”¨æ¶ˆè´¹ï¼Œä¸æ”¯æŒ Token äº¤æ˜“å¸‚åœºã€‚ |
| **å¼€æºå±æ€§** | Apacheâ€‘2.0 å¼€æºã€‚ | MIT å¼€æºã€‚ | é—­æº SaaSã€‚ | é—­æºæ‰˜ç®¡æœåŠ¡ã€‚ | é—­æºäº‘æœåŠ¡ã€‚ |

## ç³»ç»Ÿè¦æ±‚

- Go 1.24 æˆ–æ›´æ–°ç‰ˆæœ¬
- Makeï¼ˆå¯é€‰ï¼Œç”¨äºä¾¿æ·ç›®æ ‡ï¼‰
- Node.js 18+ï¼ˆä»…åœ¨æ„å»ºå¯é€‰å‰ç«¯æ—¶éœ€è¦ï¼‰

## å®‰è£…

Tokligence Gateway ç°åœ¨å¯é€šè¿‡å¤šä¸ªå¹³å°çš„åŒ…ç®¡ç†å™¨è·å–ï¼š

### Python (pip)
```bash
pip install tokligence
```

### Node.js (npm)
```bash
npm i @tokligence/gateway
```

### ä»æºç æ„å»º
```bash
git clone https://github.com/tokligence/tokligence-gateway
cd tokligence-gateway
make build
```

## ä¸ºä»€ä¹ˆé€‰æ‹© Tokligence Gatewayï¼Ÿ

**æ‘†è„±ä¾›åº”å•†é”å®š**
é€šè¿‡é…ç½®æ›´æ”¹åˆ‡æ¢æä¾›å•†ã€‚æ— éœ€é‡å†™ä»£ç ï¼Œæ— éœ€è¿ç§»ç—›è‹¦ã€‚

**éšç§å’Œæ§åˆ¶**
åœ¨ä½ çš„åŸºç¡€è®¾æ–½ä¸Šä¿ç•™æ•æ„Ÿæç¤ºå’Œæ•°æ®ã€‚ä½ å†³å®šä»€ä¹ˆæ•°æ®å»å“ªé‡Œã€‚

**æˆæœ¬ä¼˜åŒ–**
é’ˆå¯¹æ¯ä¸ªç”¨ä¾‹å°†è¯·æ±‚è·¯ç”±åˆ°æœ€å…·æˆæœ¬æ•ˆç›Šçš„æä¾›å•†ã€‚å®æ—¶è·Ÿè¸ªæ”¯å‡ºã€‚

**å¯é æ€§å’Œæ•…éšœè½¬ç§»**
å½“ä¸»è¦æä¾›å•†å®•æœºæ—¶è‡ªåŠ¨å›é€€åˆ°å¤‡é€‰æä¾›å•†ã€‚æ²¡æœ‰å•ç‚¹æ•…éšœã€‚

**é€æ˜åº¦å’Œé—®è´£åˆ¶**
ä½ çš„ç½‘å…³è®°å½•æ¯ä¸ª tokenã€æ¯ä¸ªè¯·æ±‚ã€æ¯ç¬”æˆæœ¬ã€‚å½“æä¾›å•†å‡ºç°è®¡è´¹é”™è¯¯æˆ– token è®¡æ•°é”™è¯¯æ—¶ï¼Œä½ æœ‰æ•°æ®è¯æ˜ã€‚ä¸å†æœ‰é»‘ç®±æ”¶è´¹ã€‚

**æ¨¡å‹å®¡è®¡å’Œæ€§èƒ½è·Ÿè¸ª**
æ£€æµ‹æä¾›å•†ä½•æ—¶æ‚„æ‚„é™çº§æœåŠ¡â€”â€”å“åº”å˜æ…¢ã€è¾“å‡ºè´¨é‡ä¸‹é™æˆ–ååé‡è¢«é™åˆ¶ã€‚ä½ çš„è´¦æœ¬åˆ›å»ºäº†ä¸€ä¸ªå®¡è®¡è·Ÿè¸ªï¼Œæ­ç¤ºéšæ—¶é—´å˜åŒ–çš„æ¨¡å¼ï¼Œä¿æŠ¤ä½ å…å—éšç§˜é™çº§çš„å½±å“ã€‚

## äº§å“çŸ©é˜µ

| æ¸ é“ | çŠ¶æ€ | äº¤ä»˜å†…å®¹ | é€‚ç”¨äº | å¤‡æ³¨ |
| --- | --- | --- | --- | --- |
| Gateway CLI (`gateway`) | v0.3.0 | è·¨å¹³å°äºŒè¿›åˆ¶æ–‡ä»¶ + é…ç½®æ¨¡æ¿ | å–œæ¬¢ç»ˆç«¯å’Œè‡ªåŠ¨åŒ–çš„æ„å»ºè€… | ç”¨äºç”¨æˆ·ç®¡ç†ã€é…ç½®å’Œç®¡ç†ä»»åŠ¡çš„å‘½ä»¤è¡Œå·¥å…· |
| Gateway å®ˆæŠ¤è¿›ç¨‹ (`gatewayd`) | v0.3.0 | é•¿æœŸè¿è¡Œçš„ HTTP æœåŠ¡ä¸ä½¿ç”¨è´¦æœ¬ | ä¸ºå›¢é˜Ÿæ‰˜ç®¡å…±äº«ç½‘å…³çš„è¿ç»´äººå‘˜ | å…·æœ‰å¯è§‚å¯Ÿæ€§é’©å­å’Œå…¨å¤©å€™å¯é æ€§çš„ç”Ÿäº§å°±ç»ªæœåŠ¡ã€‚å·²é€šè¿‡ Codex CLI v0.55.0+ æµ‹è¯•ã€‚ |
| å‰ç«¯åŒ… (`web` å’Œ `h5`) | v0.3.0 | ç”¨äºæ¡Œé¢å’Œç§»åŠ¨ç«¯çš„å¯é€‰ React UI | éœ€è¦å¯è§†åŒ–æ§åˆ¶å°çš„å›¢é˜Ÿ | å®Œå…¨å¯é€‰â€”â€”ç½‘å…³é»˜è®¤ä¿æŒæ— å¤´æ¨¡å¼ï¼›åªåœ¨éœ€è¦æµè§ˆå™¨ç•Œé¢æ—¶å¯ç”¨ |
| Python åŒ… (`tokligence`) | v0.3.0 | `pip` åŒ…ï¼Œå…·æœ‰ç½‘å…³åŠŸèƒ½ | Python ä¼˜å…ˆç”¨æˆ·ã€ç¬”è®°æœ¬ã€CI ä½œä¸š | é€šè¿‡ `pip install tokligence` å®‰è£… |
| Node.js åŒ… (`@tokligence/gateway`) | v0.3.0 | `npm` åŒ…ï¼Œå…·æœ‰ç½‘å…³åŠŸèƒ½ | JavaScript/TypeScript å¼€å‘è€… | é€šè¿‡ `npm i @tokligence/gateway` å®‰è£… |
| Docker é•œåƒ | v0.3.0 | åŒ…å« CLIã€å®ˆæŠ¤è¿›ç¨‹ã€é…ç½®çš„å¤šæ¶æ„å®¹å™¨ | Kubernetesã€Nomadã€å¼€å‘å®¹å™¨ | é™„å¸¦ä¸¤ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼›æŒ‚è½½ `config/` è¿›è¡Œè‡ªå®šä¹‰ã€‚æä¾›ä¸ªäººç‰ˆå’Œå›¢é˜Ÿç‰ˆã€‚ |

æ‰€æœ‰å˜ä½“éƒ½ç”±ç›¸åŒçš„ Go ä»£ç åº“é©±åŠ¨ï¼Œç¡®ä¿è·¨å¹³å°çš„ä¸€è‡´æ€§èƒ½ã€‚

## ç‰ˆæœ¬

| ç‰ˆæœ¬ | æ•°æ®åº“ | ç›®æ ‡ç”¨æˆ· | ä¸»è¦åŠŸèƒ½ |
| --- | --- | --- | --- |
| **ç¤¾åŒºç‰ˆ** | SQLite æˆ– PostgreSQL | ä¸ªäººå’Œå›¢é˜Ÿ | å¼€æºæ ¸å¿ƒã€OpenAI å…¼å®¹ APIã€é€‚é…å™¨ã€token è´¦æœ¬ã€å¤šç”¨æˆ·ã€åŸºç¡€å¯è§‚å¯Ÿæ€§ |
| **ä¼ä¸šç‰ˆ** | PostgreSQL + Redis | å¤§å‹ç»„ç»‡ | é«˜çº§è·¯ç”±ã€åˆè§„æ€§ã€å¤šç§Ÿæˆ·ã€é«˜å¯ç”¨ã€SSO/SCIM |

**æ³¨æ„**ï¼šç¤¾åŒºç‰ˆå’Œä¼ä¸šç‰ˆå…±äº«**ç›¸åŒçš„ä»£ç åº“**ï¼›ä¼ä¸šç‰ˆåŠŸèƒ½é€šè¿‡å•†ä¸šè®¸å¯è¯å’Œé…ç½®å¯ç”¨ã€‚

## ä¸»è¦åŠŸèƒ½

- **å¤šæä¾›å•†æ”¯æŒ**ï¼šOpenAIã€Anthropic å’Œ Google Geminiï¼Œç»Ÿä¸€ç½‘å…³æ¥å£
- **åŒåè®®æ”¯æŒ**ï¼šOpenAI å…¼å®¹å’Œ Anthropic åŸç”Ÿ API åŒæ—¶è¿è¡Œ
- **å®Œæ•´çš„å·¥å…·è°ƒç”¨æ”¯æŒ**ï¼šå®Œæ•´çš„ OpenAI å‡½æ•°è°ƒç”¨ï¼Œè‡ªåŠ¨è½¬æ¢ä¸º Anthropic å·¥å…·
- **æ™ºèƒ½é‡å¤æ£€æµ‹**ï¼šé€šè¿‡æ£€æµ‹é‡å¤å·¥å…·è°ƒç”¨é˜²æ­¢æ— é™å¾ªç¯
- **Codex CLI é›†æˆ**ï¼šå®Œå…¨æ”¯æŒ OpenAI Codex v0.55.0+ çš„ Responses API å’Œå·¥å…·è°ƒç”¨
- **Gemini é€ä¼ ä»£ç†**ï¼šåŸç”Ÿ Google Gemini API æ”¯æŒï¼ŒåŒæ—¶æ”¯æŒåŸç”Ÿå’Œ OpenAI å…¼å®¹ç«¯ç‚¹
- **çµæ´»çš„å·¥ä½œæ¨¡å¼**ï¼šä¸‰ç§æ“ä½œæ¨¡å¼ - `auto`ï¼ˆæ™ºèƒ½è·¯ç”±ï¼‰ã€`passthrough`ï¼ˆä»…é€ä¼ ï¼‰ã€`translation`ï¼ˆä»…ç¿»è¯‘ï¼‰
- **å¤šç«¯å£æ¶æ„**ï¼šé»˜è®¤é—¨é¢ç«¯å£ 8081ï¼Œå¯é€‰å¤šç«¯å£æ¨¡å¼å®ç°ä¸¥æ ¼ç«¯ç‚¹éš”ç¦»
- **OpenAI å…¼å®¹çš„èŠå¤© + åµŒå…¥**ï¼ˆSSE å’Œé SSEï¼‰
- **Anthropic åŸç”Ÿ `/v1/messages`**ï¼Œå…·æœ‰æ­£ç¡®çš„ SSE å°è£…ï¼ˆä¸ Claude Code å…¼å®¹ï¼‰
- **Gemini åŸç”Ÿ `/v1beta/models/*` ç«¯ç‚¹**ï¼Œæ”¯æŒ SSE æµå¼ä¼ è¾“
- **è¿›ç¨‹å†…è½¬æ¢**ï¼ˆAnthropic â†” OpenAIï¼‰ï¼Œå…·æœ‰å¥å£®çš„æµå¼ä¼ è¾“å’Œå·¥å…·è°ƒç”¨
- **è½®è½¬æ—¥å¿—**ï¼ˆæŒ‰æ—¥æœŸ + å¤§å°ï¼‰ï¼ŒCLI/å®ˆæŠ¤è¿›ç¨‹è¾“å‡ºåˆ†ç¦»
- **å¼€å‘å‹å¥½çš„è®¤è¯åˆ‡æ¢**å’Œåˆç†çš„é»˜è®¤è®¾ç½®
- **è·¨å¹³å°æ„å»º**ï¼ˆLinux/macOS/Windowsï¼‰

å®Œæ•´è¯¦æƒ… â†’ å‚è§ [docs/features.md](docs/features.md)

## ä½¿ç”¨åœºæ™¯

- **OpenAI Codex â†’ Anthropic Claude**ï¼šå°† Codex æŒ‡å‘ `http://localhost:8081/v1`ï¼ˆOpenAI å…¼å®¹ï¼‰ã€‚ç½‘å…³å°† Chat Completions å’Œ Responses API è¯·æ±‚è½¬æ¢ä¸º Anthropicï¼Œå¤„ç†å·¥å…·è°ƒç”¨ï¼Œå¹¶é˜²æ­¢æ— é™å¾ªç¯ã€‚å®Œå…¨æ”¯æŒ Codex CLI v0.55.0+ï¼ŒåŒ…æ‹¬æµå¼ä¼ è¾“ã€å·¥å…·å’Œè‡ªåŠ¨é‡å¤æ£€æµ‹ã€‚å‚è§ [docs/codex-to-anthropic.md](docs/codex-to-anthropic.md)ã€‚
- **Claude Code é›†æˆ**ï¼šå°† Claude Code æŒ‡å‘ `http://localhost:8081/anthropic/v1/messages`ï¼ˆSSEï¼‰ã€‚ç½‘å…³å°†è¯·æ±‚è½¬æ¢åˆ°ä¸Šæ¸¸ OpenAI å¹¶ä»¥ Anthropic é£æ ¼çš„ SSE æµå¼è¿”å›ã€‚è®¾ç½® `TOKLIGENCE_OPENAI_API_KEY` å³å¯ä½¿ç”¨ã€‚å‚è§ [docs/claude_code-to-openai.md](docs/claude_code-to-openai.md)ã€‚
- **Google Gemini é›†æˆ**ï¼šå°†ä½ çš„åº”ç”¨ç¨‹åºæŒ‡å‘ `http://localhost:8084/v1beta` ä»¥è®¿é—®åŸç”Ÿ Gemini APIï¼Œæˆ–ä½¿ç”¨ OpenAI å…¼å®¹ç«¯ç‚¹ `http://localhost:8084/v1beta/openai/chat/completions`ã€‚ç½‘å…³ä¸º Gemini åŸç”Ÿå’Œ OpenAI å…¼å®¹æ ¼å¼æä¾›é€ä¼ ä»£ç†æ”¯æŒï¼Œå¹¶æ”¯æŒ SSE æµå¼ä¼ è¾“ã€‚å‚è§ [docs/gemini-integration.md](docs/gemini-integration.md)ã€‚
- **æ›¿ä»£ OpenAI ä»£ç†**ï¼šå°†ä½ çš„ SDK åŸºç¡€ URL æ›´æ”¹ä¸ºç½‘å…³ `/v1` ç«¯ç‚¹ï¼Œæ— éœ€æ›´æ”¹åº”ç”¨ç¨‹åºä»£ç å³å¯è·å¾—é›†ä¸­å¼æ—¥å¿—è®°å½•ã€ä½¿ç”¨ç»Ÿè®¡å’Œè·¯ç”±ã€‚
- **å¤šæä¾›å•†åˆ‡æ¢**ï¼šé€šè¿‡é…ç½®æ›´æ”¹å°† `claude*` è·¯ç”±åˆ° Anthropicï¼Œå°† `gpt-*` è·¯ç”±åˆ° OpenAIï¼Œå°† `gemini-*` è·¯ç”±åˆ° Google Geminiï¼›æ— éœ€ä¿®æ”¹ agent ä»£ç å³å¯åˆ‡æ¢æä¾›å•†ã€‚
- **å›¢é˜Ÿç½‘å…³**ï¼šä¸ºä½ çš„å›¢é˜Ÿè¿è¡Œ `gatewayd`ï¼Œæä¾› API å¯†é’¥ã€æ¯ç”¨æˆ·è´¦æœ¬ï¼Œä¸” CPU/RAM å ç”¨å°ã€‚
- **æœ¬åœ°å¼€å‘/ç¦»çº¿**ï¼šä½¿ç”¨å†…ç½®çš„ `loopback` æ¨¡å‹å’Œ SQLite å¼€å‘/æµ‹è¯• SSE æµï¼Œæ— éœ€è°ƒç”¨å¤–éƒ¨ LLMã€‚

## å¿«é€Ÿå¼€å§‹å’Œé…ç½®

å‚è§ [docs/QUICK_START.md](docs/QUICK_START.md) äº†è§£è®¾ç½®ã€é…ç½®ã€æ—¥å¿—è®°å½•å’Œå¼€å‘è€…å·¥ä½œæµç¨‹ã€‚

### Tokligence Gateway CLI èŠå¤©åŠ©æ‰‹ï¼ˆ`tgw chat`ï¼‰

é€šè¿‡ npm åŒ…ï¼ˆ`@tokligence/gateway`ï¼‰å®‰è£…æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªäº¤äº’å¼ CLI åŠ©æ‰‹æ¥å®Œæˆç½‘å…³çš„é…ç½®å’Œæ’é”™ï¼š

```bash
tgw chat
```

ç¤ºä¾‹ `tgw chat` ä¼šè¯ï¼š

![Tokligence Gateway CLI Chat](data/images/tgw_chat_config_example.png)

è¿™ä¸ªåŠ©æ‰‹å¯ä»¥ï¼š

- è‡ªåŠ¨æ£€æµ‹å¯ç”¨çš„ LLM ç«¯ç‚¹ï¼ˆæœ¬åœ° LLMã€å•†ä¸š APIã€å·²è¿è¡Œçš„ gatewayï¼‰
- å¸®ä½ åˆ‡æ¢å·¥ä½œæ¨¡å¼ï¼ˆä¾‹å¦‚ `auto`ã€`translation`ã€`passthrough`ï¼‰
- æä¾›å¯ä»¥ç›´æ¥å¤åˆ¶ç²˜è´´çš„å‘½ä»¤ï¼Œä¾‹å¦‚ï¼š

```bash
export TOKLIGENCE_OPENAI_API_KEY=sk-...
tgw config set work_mode translation
```

åœ¨è®¾è®¡ä¸Šï¼Œè¿™ä¸ªèŠå¤©åŠ©æ‰‹éµå¾ªæ•°æ®æœ€å°åŒ–ç­‰ç°ä»£æ•°æ®ä¿æŠ¤å®è·µï¼šAPI key / token / secret åªåœ¨æœ¬åœ°è¯»å–ä¸æ£€æµ‹ï¼Œå‘é€ç»™è¿œç¨‹ LLM æ—¶ä¼šåšæ©ç å¤„ç†ï¼ˆä¾‹å¦‚åªæš´éœ²é•¿åº¦ã€å‰ç¼€æˆ– `*_configured` å¸ƒå°”æ ‡è®°ï¼‰ï¼Œé¿å…æ³„éœ²æ•æ„Ÿä¿¡æ¯ã€‚

## æ¶æ„

### åŒåè®®æ¶æ„

ç½‘å…³åŒæ—¶å…¬å¼€ **OpenAI å’Œ Anthropic API æ ¼å¼**ï¼Œæ ¹æ®ä½ çš„é…ç½®è¿›è¡Œæ™ºèƒ½è·¯ç”±ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           å®¢æˆ·ç«¯                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚  â€¢ OpenAI SDK / Codex                    â”‚
â”‚  â€¢ Claude Code                           â”‚
â”‚  â€¢ LangChain / ä»»ä½•å…¼å®¹å·¥å…·               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Tokligence Gateway (é—¨é¢ :8081)        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚                                          â”‚
â”‚  OpenAI å…¼å®¹ API:                        â”‚
â”‚    POST /v1/chat/completions             â”‚
â”‚    POST /v1/responses                    â”‚
â”‚    GET  /v1/models                       â”‚
â”‚    POST /v1/embeddings                   â”‚
â”‚                                          â”‚
â”‚  Anthropic åŸç”Ÿ API:                     â”‚
â”‚    POST /anthropic/v1/messages           â”‚
â”‚    POST /anthropic/v1/messages/count_tokensâ”‚
â”‚                                          â”‚
â”‚  å·¥ä½œæ¨¡å¼: auto | passthrough | translation â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   è·¯ç”±é€‚é…å™¨           â”‚
        â”‚  (åŸºäºæ¨¡å‹çš„è·¯ç”±)      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â–¼           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  OpenAI  â”‚   â”‚Anthropic â”‚
    â”‚  é€‚é…å™¨  â”‚   â”‚  é€‚é…å™¨  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ OpenAI   â”‚   â”‚Anthropic â”‚
  â”‚   API    â”‚   â”‚   API    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### API ç«¯ç‚¹

| ç«¯ç‚¹ | åè®® | ç”¨é€” | ç¤ºä¾‹å®¢æˆ·ç«¯ |
|----------|----------|---------|----------------|
| `POST /v1/chat/completions` | OpenAI | æ”¯æŒå·¥å…·è°ƒç”¨çš„èŠå¤© | OpenAI SDKã€LangChain |
| `POST /v1/responses` | OpenAI | å¸¦ä¼šè¯ç®¡ç†çš„ Responses API | **Codex CLI v0.55.0+** |
| `GET /v1/models` | OpenAI | åˆ—å‡ºå¯ç”¨æ¨¡å‹ | ä»»ä½• OpenAI å®¢æˆ·ç«¯ |
| `POST /v1/embeddings` | OpenAI | æ–‡æœ¬åµŒå…¥ | LangChainã€OpenAI SDK |
| `POST /anthropic/v1/messages` | Anthropic | åŸç”Ÿ Anthropic èŠå¤© | Claude Code |
| `POST /anthropic/v1/messages/count_tokens` | Anthropic | Token ä¼°ç®— | Claude Code |

### è·¯ç”±æœºåˆ¶

ç½‘å…³æ ¹æ®**æ¨¡å‹åç§°æ¨¡å¼**è·¯ç”±è¯·æ±‚ï¼š

```bash
# é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®
TOKLIGENCE_ROUTES=claude*=>anthropic,gpt-*=>openai

# ç¤ºä¾‹ï¼š
model: "claude-3-haiku"     â†’ Anthropic API
model: "claude-3.5-sonnet"  â†’ Anthropic API
model: "gpt-4"              â†’ OpenAI API
model: "gpt-3.5-turbo"      â†’ OpenAI API
```

### å·¥ä½œæ¨¡å¼

ç½‘å…³æ”¯æŒä¸‰ç§å·¥ä½œæ¨¡å¼ï¼Œçµæ´»å¤„ç†è¯·æ±‚ï¼š

| æ¨¡å¼ | è¡Œä¸º | ä½¿ç”¨åœºæ™¯ |
|------|----------|----------|
| **`auto`**ï¼ˆé»˜è®¤ï¼‰ | æ™ºèƒ½è·¯ç”± - æ ¹æ®ç«¯ç‚¹+æ¨¡å‹åŒ¹é…è‡ªåŠ¨é€‰æ‹©é€ä¼ æˆ–ç¿»è¯‘ | é€‚åˆæ··åˆå·¥ä½œè´Ÿè½½ï¼›`/v1/responses` + gpt* = é€ä¼ ï¼Œ`/v1/responses` + claude* = ç¿»è¯‘ |
| **`passthrough`** | ä»…é€ä¼  - ç›´æ¥é€ä¼ åˆ°ä¸Šæ¸¸æä¾›å•†ï¼Œæ‹’ç»ç¿»è¯‘è¯·æ±‚ | å¼ºåˆ¶æ‰€æœ‰è¯·æ±‚é€ä¼ åˆ°åŸç”Ÿæä¾›å•†ï¼Œä¸è¿›è¡Œç¿»è¯‘ |
| **`translation`** | ä»…ç¿»è¯‘ - ä»…å…è®¸ API æ ¼å¼ä¹‹é—´çš„ç¿»è¯‘ï¼Œæ‹’ç»é€ä¼ è¯·æ±‚ | å¼ºåˆ¶æ‰€æœ‰è¯·æ±‚é€šè¿‡ç¿»è¯‘å±‚ï¼Œç”¨äºæµ‹è¯•æˆ–åè®®è½¬æ¢ |

```bash
# é€šè¿‡ç¯å¢ƒå˜é‡æˆ– INI é…ç½®
TOKLIGENCE_WORK_MODE=auto|passthrough|translation

# æˆ–åœ¨ config/dev/gateway.ini ä¸­
work_mode=auto
```

**ç¤ºä¾‹**ï¼š
- `work_mode=auto`ï¼š`/v1/responses` é…åˆ `gpt-4` â†’ é€ä¼ åˆ° OpenAIï¼›é…åˆ `claude-3.5-sonnet` â†’ ç¿»è¯‘åˆ° Anthropic
- `work_mode=passthrough`ï¼šä»…å…è®¸åŸç”Ÿæä¾›å•†é€ä¼ ï¼ˆä¾‹å¦‚ gpt* åˆ° OpenAIï¼Œclaude* åˆ° Anthropic é€šè¿‡å…¶åŸç”Ÿ APIï¼‰
- `work_mode=translation`ï¼šä»…å…è®¸è·¨åè®®ç¿»è¯‘ï¼ˆä¾‹å¦‚ Codex â†’ Anthropic é€šè¿‡ OpenAI Responses API ç¿»è¯‘ï¼‰

### å¤šç«¯å£æ¶æ„

**é»˜è®¤æ¨¡å¼ï¼ˆå•ç«¯å£ï¼‰**ï¼šç½‘å…³é»˜è®¤åœ¨é—¨é¢ç«¯å£ **:8081** ä¸Šè¿è¡Œï¼Œåœ¨å•ä¸ªç«¯å£ä¸Šæš´éœ²æ‰€æœ‰ç«¯ç‚¹ï¼ˆOpenAIã€Anthropicã€adminï¼‰ï¼Œç®€å•æ˜“ç”¨ã€‚

**å¤šç«¯å£æ¨¡å¼ï¼ˆå¯é€‰ï¼‰**ï¼šå¯ç”¨ `multiport_mode=true` ä»¥åœ¨ä¸“ç”¨ç«¯å£ä¸Šå®ç°ä¸¥æ ¼çš„ç«¯ç‚¹éš”ç¦»ï¼š

| é…ç½®é”® | æè¿° | é»˜è®¤å€¼ |
| --- | --- | --- |
| `multiport_mode` | å¯ç”¨å¤šç«¯å£æ¨¡å¼ | `false` |
| `facade_port` | ä¸»èšåˆç›‘å¬å™¨ï¼ˆæ‰€æœ‰ç«¯ç‚¹ï¼‰ | `:8081` |
| `admin_port` | ä»…ç®¡ç†ç«¯ç‚¹ | `:8079` |
| `openai_port` | ä»… OpenAI ç«¯ç‚¹ | `:8082` |
| `anthropic_port` | ä»… Anthropic ç«¯ç‚¹ | `:8083` |
| `gemini_port` | ä»… Gemini ç«¯ç‚¹ | `:8084` |
| `facade_endpoints`, `openai_endpoints`, `anthropic_endpoints`, `gemini_endpoints`, `admin_endpoints` | æ¯ä¸ªç«¯å£çš„é€—å·åˆ†éš”ç«¯ç‚¹é”® | é»˜è®¤å€¼åœ¨ `internal/httpserver/server.go` ä¸­ |

ç«¯ç‚¹é”®æ˜ å°„åˆ°å…·ä½“è·¯ç”±ï¼š

- `openai_core`: `/v1/chat/completions`, `/v1/embeddings`, `/v1/models`
- `openai_responses`: `/v1/responses`
- `anthropic`: `/anthropic/v1/messages`, `/v1/messages` åŠå…¶ `count_tokens` å˜ä½“
- `gemini_native`: `/v1beta/models/*`ï¼ˆåŸç”Ÿ Gemini API å’Œ OpenAI å…¼å®¹ç«¯ç‚¹ï¼‰
- `admin`: `/api/v1/admin/...`
- `health`: `/health`

å¯ç”¨å¤šç«¯å£æ¨¡å¼çš„ç¤ºä¾‹é…ç½®ï¼š

```ini
multiport_mode = true
facade_port = :8081
admin_port = :8079
openai_port = :8082
anthropic_port = :8083
gemini_port = :8084

openai_endpoints = openai_core,openai_responses,health
anthropic_endpoints = anthropic,health
gemini_endpoints = gemini_native,health
admin_endpoints = admin,health
```

å›å½’æµ‹è¯•å¥—ä»¶ï¼ˆ`go test ./...` å’Œ `tests/run_all_tests.sh`ï¼‰ç°åœ¨åœ¨æ¯ä¸ªç›‘å¬å™¨ä¸Šæµ‹è¯• `/v1/responses` æµå¼ä¼ è¾“ï¼Œä»¥ç¡®ä¿æ¡¥æ¥åœ¨æ‰€æœ‰ç«¯å£ä¸Šäº§ç”Ÿé¢„æœŸçš„ SSE åºåˆ—ã€‚

### æ ¸å¿ƒç‰¹æ€§

1. **åè®®é€æ˜**ï¼šå®¢æˆ·ç«¯é€‰æ‹©å…¶é¦–é€‰çš„ API æ ¼å¼ï¼ˆOpenAI æˆ– Anthropicï¼‰
2. **çµæ´»è·¯ç”±**ï¼šé…ç½®é©±åŠ¨çš„åç«¯é€‰æ‹©ï¼Œæ— éœ€æ›´æ”¹ä»£ç 
3. **è‡ªåŠ¨æ ¼å¼è½¬æ¢**ï¼šæ— ç¼çš„ OpenAI â†” Anthropic è½¬æ¢
4. **å·¥å…·è°ƒç”¨æ”¯æŒ**ï¼šå®Œæ•´çš„ OpenAI å‡½æ•°è°ƒç”¨ï¼Œè‡ªåŠ¨è½¬æ¢ Anthropic å·¥å…·
5. **ç»Ÿä¸€æ—¥å¿—**ï¼šæ‰€æœ‰è¯·æ±‚è®°å½•åˆ°å•ä¸€è´¦æœ¬æ•°æ®åº“

### æ•°æ®åº“æ¶æ„å…¼å®¹æ€§
- SQLite å’Œ PostgreSQL ä½¿ç”¨ç›¸åŒæ¶æ„
- å¯åŠ¨æ—¶è‡ªåŠ¨è¿ç§»
- ä»ç¤¾åŒºç‰ˆåˆ°ä¼ä¸šç‰ˆçš„å¹²å‡€å‡çº§è·¯å¾„

### âœ… å·²é€šè¿‡ Codex CLI éªŒè¯

ç½‘å…³å·²é€šè¿‡ OpenAI Codex CLI å…¨è‡ªåŠ¨æ¨¡å¼æµ‹è¯•å’ŒéªŒè¯ï¼š

**æµ‹è¯•å‘½ä»¤ï¼š**
```bash
codex --full-auto --config 'model="claude-3-5-sonnet-20241022"'
```

**é…ç½®ï¼š**
- Base URL æŒ‡å‘ç½‘å…³ï¼š`http://localhost:8081/v1`
- æ¨¡å‹ï¼š`claude-3-5-sonnet-20241022`ï¼ˆAnthropic Claudeï¼‰
- æ¨¡å¼ï¼šå¯ç”¨å·¥å…·è°ƒç”¨çš„å…¨è‡ªåŠ¨æ¨¡å¼
- APIï¼šå¸¦æµå¼ä¼ è¾“çš„ OpenAI Responses API

**æˆªå›¾ï¼š**

![Codex CLI with Gateway](data/images/codex-to-anthropic.png)

æµ‹è¯•æ¼”ç¤ºï¼š
- âœ… æ— ç¼çš„ Codex â†’ Gateway â†’ Anthropic æµç¨‹
- âœ… å·¥å…·è°ƒç”¨ï¼ˆshell å‘½ä»¤ï¼‰æ­£å¸¸å·¥ä½œ
- âœ… å®æ—¶æµå¼å“åº”
- âœ… é‡å¤æ£€æµ‹é˜²æ­¢æ— é™å¾ªç¯
- âœ… è‡ªåŠ¨ shell å‘½ä»¤è§„èŒƒåŒ–

è¯¦ç»†è®¾ç½®è¯´æ˜ï¼Œè¯·å‚è§ [docs/codex-to-anthropic.md](docs/codex-to-anthropic.md)ã€‚

### âœ… å·²é€šè¿‡ Claude Code éªŒè¯

Claude Code æŒ‡å‘ `http://localhost:8081/anthropic`ï¼ˆAPI Key å¯ç”¨å ä½å€¼ï¼Œç½‘å…³ä¸Šé…ç½® OpenAI Keyï¼‰ï¼Œé€šè¿‡ç¿»è¯‘è®¿é—® GPTï¼š

![Claude Code to GPT via Gateway](data/images/claude-to-gpt.png)

### è‡ªåŠ¨æ¨¡å¼ï¼šå…ˆçœ‹æ¨¡å‹ï¼Œå†çœ‹ç«¯ç‚¹

åœ¨ `work_mode=auto` ä¸‹ï¼Œç½‘å…³å…ˆæ ¹æ®è¯·æ±‚ä¸­çš„ `model` æ¨æ–­æä¾›å•†ï¼ˆç”± `model_provider_routes` æ§åˆ¶ï¼Œå¦‚ `gpt*â†’openai`ã€`claude*â†’anthropic`ï¼‰ï¼Œå†ç»“åˆè°ƒç”¨çš„ç«¯ç‚¹åˆ¤æ–­æ˜¯ç›´è¿è¿˜æ˜¯ç¿»è¯‘ã€‚è¯·åœ¨é…ç½®ä¸­æ˜¾å¼æ·»åŠ ä½ ä¿¡ä»»çš„å‰ç¼€ï¼ˆå¦‚ `o1*â†’openai`ã€`qwen*â†’ali`ï¼‰ï¼Œé¿å…è¿‡å®½çš„é€šé…ã€‚è‹¥æ¨æ–­çš„æä¾›å•†ä¸å¯ç”¨ï¼Œåˆ™ä½¿ç”¨å¦ä¸€ä¾§çš„é»˜è®¤æ¨¡å‹åšç¿»è¯‘ï¼Œä¿è¯è¯·æ±‚ä¸ä¸­æ–­ã€‚

å½“å¼€å¯ `TOKLIGENCE_CHAT_TO_ANTHROPIC=on`ï¼ˆæˆ–åœ¨ `gateway.ini` ä¸­è®¾ç½® `chat_to_anthropic=true`ï¼‰æ—¶ï¼Œè¿™ç§â€œå…ˆçœ‹æ¨¡å‹â€çš„ç­–ç•¥ä¹Ÿåº”ç”¨åˆ° OpenAI Chat æ¥å£ï¼šå¯¹ `/v1/chat/completions` è€Œè¨€ï¼Œ`claude*` æ¨¡å‹ä¼šè¢«ç¿»è¯‘åˆ° Anthropic `/v1/messages`ï¼ˆéæµå¼ç›´æ¥è¿”å› Anthropic çš„ JSONï¼Œæµå¼åˆ™æŠŠ Anthropic çš„ SSE è½¬æˆ OpenAI çš„ `chat.completion.chunk` äº‹ä»¶ï¼‰ï¼Œè€Œ `gpt*` æ¨¡å‹ä»ç„¶èµ°åŸç”Ÿ OpenAI Chatã€‚

## å¼€å‘

- è¦æ±‚ï¼šGo 1.24+ã€Node 18+ï¼ˆå¦‚æœæ„å»ºå¯é€‰å‰ç«¯ï¼‰ã€Makeã€‚
- æœ¬åœ°å·¥ä½œæµç¨‹ï¼ˆæ„å»ºã€è¿è¡Œã€è„šæœ¬ï¼‰ï¼Œå‚è§ [docs/QUICK_START.md](docs/QUICK_START.md)ã€‚

## Token äº¤æ˜“ç½‘ç»œï¼ˆå¯é€‰ï¼‰

å¯ç”¨åï¼Œä½ å¯ä»¥è¿æ¥åˆ° Tokligence Token äº¤æ˜“ç½‘ç»œï¼Œä¹°å– Token å®¹é‡ã€‚ç½‘å…³é»˜è®¤å®Œå…¨ç¦»çº¿å·¥ä½œã€‚

## æ›´æ–°å’Œæœ€å°é¥æµ‹

å¯é€‰çš„æ¯æ—¥æ›´æ–°æ£€æŸ¥ä»…å‘é€é PII åŸºç¡€ä¿¡æ¯ï¼ˆéšæœºå®‰è£… IDã€ç‰ˆæœ¬ã€å¹³å°/æ•°æ®åº“ï¼‰ã€‚ä½¿ç”¨ `TOKLIGENCE_UPDATE_CHECK_ENABLED=false` ç¦ç”¨ã€‚æ ¸å¿ƒåŠŸèƒ½å®Œå…¨ç¦»çº¿å·¥ä½œã€‚

## å…¼å®¹æ€§

- å·²é€šè¿‡ Claude Code v2.0.29ï¼ˆAnthropic `/v1/messages` over SSEï¼‰çš„ç«¯åˆ°ç«¯éªŒè¯ã€‚ç½‘å…³æ ¹æ®éœ€è¦å°† Anthropic è¯·æ±‚è½¬æ¢ä¸º OpenAIï¼Œå¹¶ä»¥ Anthropic é£æ ¼çš„ SSE æµå¼è¿”å›ç»™å®¢æˆ·ç«¯ã€‚



## æ”¯æŒå’Œæ–‡æ¡£

- é—®é¢˜åé¦ˆï¼š[GitHub Issues](https://github.com/tokligence/tokligence-gateway/issues)
- å®Œæ•´åŠŸèƒ½ï¼š[docs/features.md](docs/features.md)
- å‘å¸ƒè¯´æ˜ï¼š[docs/releases/](docs/releases/)
- å˜æ›´æ—¥å¿—ï¼š[docs/CHANGELOG.md](docs/CHANGELOG.md)
- é›†æˆæŒ‡å—ï¼š
   - Codex â†’ Anthropic via Gatewayï¼š[docs/codex-to-anthropic.md](docs/codex-to-anthropic.md)
   - Claude Code â†’ OpenAI via Gatewayï¼š[docs/claude_code-to-openai.md](docs/claude_code-to-openai.md)
   - Google Gemini é›†æˆï¼š[docs/gemini-integration.md](docs/gemini-integration.md)

## è®¸å¯è¯

- ç¤¾åŒºç‰ˆï¼šApache License 2.0 â€” å‚è§ `LICENSE` å’Œ `docs/LICENSING.md`ã€‚
- ä¼ä¸šç‰ˆï¼šå•†ä¸šè®¸å¯è¯ â€” è”ç³» cs@tokligence.ai æˆ–è®¿é—® https://tokligence.aiã€‚

å“ç‰Œå’Œæ ‡è¯†æ˜¯ Tokligence çš„å•†æ ‡ã€‚å‚è§ `docs/TRADEMARKS.md`ã€‚
