# Release v0.4.0 - PII Firewall Multilingual Enhancement

**Release Date**: 2025-11-26

## Highlights

This release significantly enhances the PII Prompt Firewall with multilingual support, API key detection, and SSE streaming capabilities - making Tokligence Gateway the trusted partner for coding agents handling sensitive data.

### üõ°Ô∏è Multilingual PII Detection

- **XLM-RoBERTa NER Engine**: Default multilingual NER supporting 100+ languages with 3-5ms latency
- **Presidio Sidecar**: Optional NLP-based detection for advanced entity recognition (CPU-only)
- **Unicode Support**: Accurate token mapping for Chinese, Japanese, Korean, Arabic, and other scripts

### üîë API Key Detection

Detects and protects API keys from 30+ providers before they leak to LLM providers:

- Cloud: AWS, Google Cloud, Azure, DigitalOcean, Heroku
- AI: OpenAI, Anthropic, Cohere, HuggingFace
- Developer: GitHub, GitLab, npm, PyPI
- Payment: Stripe, Square, PayPal
- Communication: Slack, Twilio, SendGrid, Mailgun
- And more...

### üõÇ Passport Recognition

Pattern-based passport number detection for 22 countries including US, UK, Canada, Australia, China, Japan, Korea, Germany, France, and more.

### üì° SSE Streaming Support

Real-time PII detokenization in streaming responses with session correlation for accurate input/output token mapping.

## Breaking Changes

### Configuration Migration

Firewall configuration has been migrated from YAML to INI format:

**Before (YAML)**:
```yaml
firewall:
  mode: redact
```

**After (INI)**:
```ini
[prompt_firewall]
mode = redact
```

Environment variables renamed from `TOKLIGENCE_FIREWALL_*` to `TOKLIGENCE_PROMPT_FIREWALL_*`.

## Documentation Updates

- README vision refocused on three core pillars
- New tagline: "High-Performance AI Gateway for Coding Agents & Enterprise Token Management"
- Comprehensive PII entities reference documentation
- All firewall documentation translated to English

## Security

- Upgraded `golang.org/x/crypto` to v0.45.0 (addresses CVE vulnerabilities)
- Removed sensitive pattern names from log output
- Enhanced token normalization for streaming

## Upgrade Guide

1. Update firewall configuration from YAML to INI format
2. Rename environment variables: `TOKLIGENCE_FIREWALL_*` ‚Üí `TOKLIGENCE_PROMPT_FIREWALL_*`
3. Review API key detection settings if you have custom patterns

## Full Changelog

See [CHANGELOG.md](../CHANGELOG.md) for detailed changes.
